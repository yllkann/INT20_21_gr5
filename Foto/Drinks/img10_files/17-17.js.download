(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{506:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(1),c=n.n(o),i=n(5),s=n.n(i),u=n(789),l=n(4),d=n(786);t.default=function(){c()(document).ready((function(){var e=new URLSearchParams(window.location.search).get("entry");if(e&&r.a.isInteger(r.a.toNumber(e))){var t=Object(d.a)("/element-api/content-proxy/sweepstakes-confirmation");c.a.ajax({url:t,type:"GET",data:{entry:e},cache:!1,success:function(e,t,n){if(200===n.status){var a=e.sweepstakesEntry;if(a.expired)s()(l.Gb).broadcast("We're sorry, ".concat(a.title,' has ended. See <a href="').concat(a.rules_url,'">Official Rules</a>.'),".sweepstakes");else{c()(".sweepstakesEntry__confirmation").html(e.html).addClass("rendered"),s()(l.vb).broadcast();var r=c()(".modal.share-icons");r.appendTo(c()(document.body));var o="";r.length&&(o=new u.a(r,"share-icons")),c()(".shareicon-modal-toggle").on("click",(function(){o.open(),setTimeout((function(){o.open()}),0)}))}}document.title="Sweepstakes Entry Confirmed"}})}}))}},516:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(5),c=n.n(o),i=n(4),s=n(789),u=n(786),l=n(948);function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){e[0].target.classList.contains("authenticated")&&sessionStorage.removeItem("commentLogin"),e[0].target.classList.contains("modal-active")&&(sessionStorage.removeItem("ratingValue"),t.disconnect())}function f(e){var t=sessionStorage.getItem(e),n=document.querySelector(".ugc-comments-content-container");if(t&&n){var a=n.getBoundingClientRect().top-document.querySelector("header.navigation-test").offsetHeight;window.scrollBy(0,a),function(e){var t=sessionStorage.getItem(e),n=document.getElementById("project-ratings");t&&n&&(r()(".ugc-comments-add-comment").trigger("click"),document.querySelector(".ugc-upload-modal").querySelector("input[value=".concat(t,"]")).checked=!0)}("ratingValue"),new MutationObserver(m).observe(document.body,{attributes:!0})}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$context=t,this.$form=t.find("form"),this.$alert=t.find(".alert-banner");var n=t.closest(".ugc-upload-reply-modal");n.length?(this.$trigger=r()(".ugc-comments-reply-button"),this.ugcUploadModal=new s.a(n,"ugc-upload-reply-modal")):(this.$trigger=r()(".recipe-review-add-review, .ugc-comments-add-comment"),this.ugcUploadModal=new s.a(t.closest(".ugc-upload-modal"),"ugc-upload-modal")),this.useUGCManager=!!this.$form.closest(".ugc-upload").data("ugc-manager")&&this.$form.closest(".ugc-upload").data("ugc-manager"),this.ugcType=this.$trigger.hasClass("recipe-review-add-review")&&!this.useUGCManager?"review":"comments",f("commentLogin")}var t,n,a;return t=e,(n=[{key:"showError",value:function(e){this.$alert.removeClass("hidden"),this.$alert.find(".alert-text").text(e)}},{key:"hideError",value:function(){this.$alert.addClass("hidden"),this.$alert.find(".alert-text").text("")}},{key:"uploadComment",value:function(e,t){var n=this,a=Object(u.a)("/element-api/content-proxy/comment"),o=e;o.title=this.$context.data("headline"),(o.text||o.rating)&&r.a.post(a,o,(function(e,t){if("success"===t){n.$context.addClass("submitted"),n.hideError();var a=r()("textarea",n.$form);a.length&&a.val(""),o.text&&c()(i.ac).broadcast(e,o),o.rating&&c()(i.bc).broadcast(e,o)}})).fail((function(a){500!==a.status||t?n.showError("An error has occurred."):500!==a.status||t||Object(l.a)(n.uploadComment.bind(n),[e])}))}},{key:"uploadReview",value:function(e,t){var n=this,a=Object(u.a)("/element-api/content-proxy/review");r.a.post(a,e,(function(t,a){if("success"===a){n.$context.addClass("submitted");var r={label:"Rating Submitted"};e.text&&(r.label="Review Submitted"),c()(i.Yb).broadcast(r),n.hideError()}})).fail((function(a){500!==a.status||t?n.showError("An error has occurred."):500!==a.status||t||Object(l.a)(n.uploadReview.bind(n),[e])}))}},{key:"events",value:function(){var e=this;document.body.addEventListener(i.d,(function(t){var n=sessionStorage.getItem("ratingValue"),a=sessionStorage.getItem("commentLogin");(n||a)&&setTimeout(c()(i.ec).broadcast(t,e.$trigger),0)})),c()(i.ec).subscribe((function(t,n){if(r()("body").hasClass("authenticated"))t.preventDefault(),e.pid=n.data("tid")?n.data("tid"):"0","review"===e.ugcType&&e.$form.trigger("reset"),e.$context.removeClass("submitted"),e.hideError(),e.ugcUploadModal.open(),c()(i.Fb).broadcast(e.ugcUploadModal.$modal,n.closest(".rating-star").data("rating")),window.ugcUploadModal=e.ugcUploadModal;else if(sessionStorage.setItem("commentLogin",!0),!n.closest(".embedded-auth-modal-trigger").length){var a=n.closest(e.$trigger).data("login-url")||n.data("login-url")||n.closest("button").data("login-url");window.open(a,"_self")}})),c()(i.n).subscribe((function(t,n){n.closest(e.$trigger).length&&c()(i.ec).broadcast(t,n)})),c()(i.Kb).subscribe((function(t,n){if(n.closest(e.$form).length){t.preventDefault();var a=e.$form.find("input[name=ugc-rating]:checked").val()||e.$form.find("input[name=ugc-comments-rating]:checked").val(),o=a,c=e.$form.find("textarea[name=ugc-text]").val()?e.$form.find("textarea[name=ugc-text]").val():"",i=e.$form.closest(".ugc-upload"),s=i.data("review"===e.ugcType?"cms-id":"uuid"),u=i.data("ugc-type")||"ugc-comment",l=e.$context.find(".ugc-upload-rating").length,d=e.pid,m=r()("body")[0].className.match(/(^|\s+)template-(\S*)/)[2];a&&s&&"review"===e.ugcType?e.uploadReview({rating:a,text:c,id:s}):l&&!a||!s?e.showError("Please select a rating."):c||l?e.uploadComment({rating:a,level_of_difficulty:o,text:c,id:s,pid:d,_type:u,template:m}):e.showError("Please enter a comment.")}}))}},{key:"init",value:function(){this.events()}}])&&d(t.prototype,n),a&&d(t,a),e}();t.default=function(){r()(".component.ugc-upload").each((function(){new g(r()(this)).init()}))}},518:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(1),c=n.n(o),i=n(786),s=n(74),u=n(14),l=n.n(u),d=function(e){var t,n,a=(t=e,n={},[].forEach.call(t.attributes,(function(e){if(/^data-/.test(e.name)){var t=e.name.replace("data-","").replace(/-(.)/g,(function(e,t){return t.toUpperCase()}));n[t]=e.value}})),n);if("brand-management"===r.a.get(a,"page","")){var o=r.a.get(a,"hashId","");if(!o){var u=l.a.get("mdpaccount");o=r.a.get(u,"hashId")}var d=[];window.karma=window.karma||{},window.karma.cmd=window.karma.cmd||[];var m=s.a.data(),f={contentIsPost:m.contentIsPost,contentShownOnPlatform:m.contentShownOnPlatform,contentSyndicated:m.contentSyndicated,contentType:"other",search:m.search,title:m.title,meredithBrand:m.meredithBrand,registrationsource:"000",userDecisionArea:"Subscribe",metric9:"1",category:"auth0"},g=function(){window.location.href="/?banner=newsletterchg"},p=function(e){e.preventDefault();var t=[],n=[],a=c()(e.target).find('input[type="checkbox"]');a.each((function(e){var r=c()(a[e]),o=r.val();!0===r.prop("checked")?t.push(o):n.push(o)}));var r=g,s=t.join(","),u=n.join(",");!function(e,t){c.a.ajax({url:Object(i.a)("/element-api/content-proxy/updateNewslettersByHashId"),type:"POST",data:e,complete:t})}({hashId:o,optin:s,optout:u},r);for(var l=0;l<t.length;l+=1)f.label=t[l],f.metric9="1",window.analytics.track("newsletter signup submit",f)};c()("#newsletterFormSave").toggleClass("disabled",!0),function(e,t){c.a.ajax({url:Object(i.a)("/element-api/content-proxy/subscribedNewslettersByHashId"),type:"POST",data:e,success:t})}({hashId:o},(function(e){!function(e){for(var t=0;t<e.length;t+=1){var n=e[t].id;c()(".newsletter-checkbox #id-".concat(n)).prop("checked",!0),d.push(n)}c()("#newsletterForm").on("submit",p),c()("#newsletterFormSave").on("click",(function(e){e.preventDefault(),c()("#newsletterForm").submit()})),c()("#newsletterFormSave").toggleClass("disabled",!1),c()("#subscribeAllNewsletters").on("click",(function(e){e.preventDefault(),c()('.newsletter-checkbox input[type="checkbox"]').each((function(e,t){r.a.set(t,"checked",!0)}))})),c()("#unsubscribeAllNewsletters").on("click",(function(e){e.preventDefault(),c()('.newsletter-checkbox input[type="checkbox"]').each((function(e,t){r.a.set(t,"checked",!1)}))}))}(e)})),c()(".newsletter-management .cancel-page").on("click",(function(e){e.preventDefault(),window.analytics.track("cancel"),window.location.href="/"})),c()(".newsletter-management .newsletter").on("click",(function(e){if("checkbox"!==e.target.type){e.preventDefault();var t=("newsletter"===e.target.id?c()(e.target):c()(e.target).closest(".newsletter")).find('input[type="checkbox"]');t.prop("checked",!t.prop("checked"))}}))}};t.default=function(){var e=document.getElementById("newsletterManagementConfig");e&&d(e)}},786:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n.n(a),o=n(1),c=n.n(o);function i(e){return c()(document.body).data("add-slash")&&!r.a.endsWith(e,"/")?"".concat(e,"/"):e}},948:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(2),r=n.n(a),o=n(1),c=n.n(o),i=n(786);function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t){var n=Object(i.a)("/element-api/content-proxy/refresh-cookie");c.a.ajax({url:n,retry:!1,type:"GET",timeout:3e3,xhrFields:{withCredentials:!0},success:function(n){r.a.isArray(n)&&"function"==typeof e&&(r.a.forEach(n,(function(e){document.cookie=e})),e.apply(void 0,s(t).concat([!0])))}})}}}]);
//# sourceMappingURL=17-17.js.map