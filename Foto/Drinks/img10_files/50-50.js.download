(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{409:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),i=a(1),o=a.n(i),s=a(789),c=a(5),d=a.n(c),h=a(4),l=a(849),u=a(74);function g(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=null,m=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$context=t,this.$document=o()(document),this.$body=o()(document.body),this.$frameWrapper=o()(".embeddedAuth__frame",this.$context),this.$frame=null,this.messageType=this.$context.closest(".embedded-auth-modal.modal").length?"banner":"block",this.bindEmbedEvents(),this.alertText={error:"There was an error logging you in. Please try again later.",signup:"Account created. Welcome!",signin:"Signed in. Welcome Back!"},this.embedType=t.attr("data-embed-type"),this.frameLinks={signup:"/account/signup",signin:"/account/signin","quick-signup":"/account/quick-signup"},this.embedType){var a=new URLSearchParams(window.location.search);this.regsource=a.get("regsource")||a.get("regSource")||t.attr("data-regsource"),this.frameClass=t.attr("data-frame-class"),this.optionalSignup=t.attr("data-optional-signup");var r=n.a.get(this,"frameLinks[".concat(this.embedType,"]")),i=this.regsource?"&regsource=".concat(this.regsource):"",s=this.frameClass?"&frameclass=".concat(this.frameClass):"",c=this.optionalSignup?"&optionalsignup=".concat(this.optionalSignup):"",d="".concat(r,"?modal=true&type=").concat(this.embedType).concat(i).concat(s).concat(c);if(this.$body.hasClass("template-node-entry-page")){var h=this.$body.attr("data-content-graph-id"),u=Object(l.a)(h).id,g=n.a.replace(u,/\D/g,"");d+="&originatingSourceId=".concat(g,"&originatingSource=sweepstakes")}this.changePage(d)}var p=this;this.$document.on("quick-reg:request-complete",(function(e){p.$frameWrapper.find("iframe").contents().get(0)===e.detail.context&&p.resizeFrame()})),this.$context.addClass("initialized")}var t,a,r;return t=e,(a=[{key:"showBannerMessage",value:function(e){var t=n.a.get(e,"detail.type")||"signin";if("error"===t&&"User closed the popup window"===n.a.get(e,"detail.response.original"))return!1;var a=o()(".auth-modal-banner");return a.length&&(a.addClass("error"===t?"type-error":"type-success-signed-in"),a.removeClass("hidden"),a.find(".alert-text").text(this.alertText[t])),!0}},{key:"showSuccessBlock",value:function(e){var t=n.a.get(e,"detail.type")||"signin";if("error"===t||"User closed the popup window"===n.a.get(e,"detail.response.original"))return!1;var a=o()(".embeddedAuth__success",this.$context);return!!a.length&&(o()(".embeddedAuth__successHeading",a).text("signup"===t?"Sign Up":"Sign In"),o()(".embeddedAuth__successBody",a).text(this.alertText[t]),a.removeClass("hidden").parent().addClass("success"),!0)}},{key:"handleMessage",value:function(e){if(this.$frame&&this.$frame.length){var t=!1,a=o()(n.a.get(e,"detail.context.document"));a.length&&a.is(this.$frame.contents())&&(t="banner"===this.messageType?this.showBannerMessage(e):this.showSuccessBlock(e)),t&&(p.close(),this.$frameWrapper&&this.$frameWrapper.length&&(this.$frame.remove(),this.$frameWrapper.removeAttr("style")))}}},{key:"resizeFrame",value:function(){var e=this.$frame.contents();if(e.length){var t=o()("html",e),a={width:t.outerWidth(!1)||"100%",height:t.outerHeight(!1)||"100%"};this.$frameWrapper.width(a.width),this.$frameWrapper.height(a.height)}}},{key:"changePage",value:function(e){var t=this;if(e){this.$frame=o()("iframe",this.$frameWrapper);var a=this.$frame.contents(),r=a.length?n.a.get(a.get(0),"location.href"):null;if(!this.$frame.length||r&&-1!==r.indexOf(e.split("?")[0])||(this.$frameWrapper.removeClass("loaded"),this.$frame.attr("src",e)),!this.$frame||!this.$frame.length){var i=-1===e.indexOf("account/signup")?"Sign In":"Sign Up";this.$frame=o()('<iframe class="embeddedAuth__iframe" title="'.concat(i,'" src="').concat(e,'"></iframe>')),this.$frameWrapper.length&&(this.$frame.unbind("load"),this.$frame.unbind("unload"),this.$frame.on("load",(function(){t.resizeFrame(),t.$frameWrapper.addClass("loaded");var e=u.a.data();"sweepstakes-entry-page"!==e.contentType&&(e.category="engagement",e.label="signup modal",window.analytics.track("impression",Object.assign({},e)))})),this.$frameWrapper.html(this.$frame))}}}},{key:"bindEmbedEvents",value:function(){var e=this;window.addEventListener("user-authenticated",(function(t){e.handleMessage(t)})),document.addEventListener("quick-reg:request-success",(function(t){e.handleMessage(t)}))}}])&&g(t.prototype,a),r&&g(t,r),e}();function f(){var e=o()(".embedded-auth").not(".initialized");e.length&&o.a.each(e,(function(e,t){var a=o()(t),r=new m(a);a.data("embeddedAuth",r)}))}t.default=function(){var e=o()(".embedded-auth-modal");f(),o()(document).on("initialize.embedded-auth",(function(){f()})),e.length&&e.not(".initialized").length&&function(){var e=o()(".embedded-auth-modal"),t=o()(".embedded-auth-modal-trigger a, .embedded-auth-modal-trigger button, a.embedded-auth-modal-trigger, button.embedded-auth-modal-trigger");t.length&&(p=new s.a(e,"embedded-auth-modal"),t.attr("data-tracking-do-not-follow",!0),d()(h.n).subscribe((function(a,r){if(!r.closest(t).length&&r.closest("a.embedded-auth-modal-trigger").length&&t.push(r.closest(".embedded-auth-modal-trigger")[0]),!r.closest(t).length||o()("body").hasClass("authenticated")||o()("body").hasClass("euUser")){var n=r.closest(".gated-link"),i=n.attr("href");n.length&&i&&window.open(i,"_blank")}else{a.preventDefault();var s=o()(".partial.modal.hamburger .close");document.body.classList.contains("modal-active")&&s&&s.click();var c=r.closest("a");if(c.length||(c=r.closest("button")),!c.length)return;var d=c.attr("data-login-url")||c.attr("href"),h=c.attr("data-regsource");d=h?"".concat(d).concat(-1===d.indexOf("?")?"?":"&","modal=true&regsource=").concat(h):"".concat(d).concat(-1===d.indexOf("?")?"?":"&","modal=true");var l=o()(".embedded-auth",e);if(!l.length)return;l.data("embeddedAuth").changePage(d),p.open()}})),window.addEventListener("user-authenticated",(function(e){"error"===n.a.get(e,"detail.type")&&"User closed the popup window"===n.a.get(e,"detail.response.original")||d()(h.o).broadcast()})),e.addClass("initialized"))}()}},791:function(e,t){var a=function(e){return e&&"function"==typeof e.replace?e.replace(/[\s+]/g,"%20"):e};e.exports=function(e,t){var r=e.image;return t&&e.crops&&e.crops[t]&&!Object.prototype.hasOwnProperty.call(e,"nodeInteractiveImage")?a(e.crops[t]):a(r)}},792:function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=a(2),i=a(795),o=a(791),s=a(797),c="https://imagesvc.meredithcorp.io/v3/mm";function d(e){return decodeURIComponent(e)!==e}function h(e,t){var a={q:85,c:"sc"},r=e.poi||"face",i=n.get(e,"original.focal_point");if(n.get(e,"crop")&&"boolean"==typeof t&&t&&n.set(e,"crop",null),n.get(e,"crop")){i=n.get(e,"crops[".concat(e.crop,"].focal_point"))||i;var o=s(n.get(e,"crop"),e);n.startsWith(o,"rect=")&&(a.rect=n.trimStart(o,"rect="))}if(i&&(r="[".concat(i.x,",").concat(i.y,"]")),a.poi=r,!e.height){var c=function(e){var t=n.get(e,"width")||n.get(e,"original.width"),a=n.get(e,"height")||n.get(e,"original.height");try{var r=parseFloat(t);if(n.get(e,"crop")){var i=e.crop.match(/^aspect_(\d{1,2}(?:\.?\d{0,2}))[x]{1}(\d+)/);if(i){var o=parseFloat(i[1]),s=parseFloat(i[2]),c=r/o;return{width:t,height:Math.round(c*s)}}}}catch(e){}return{width:t,height:a}}(e),d=c.width,h=c.height;e.width=d,e.height=h}return n.get(e,"width")&&(a.w=n.get(e,"width")),n.get(e,"height")&&(a.h=n.get(e,"height")),e.topcrop&&!i&&(delete a.poi,a.c="tc"),a}e.exports=function(e,t,a){var s;if(!e)return e;if("string"==typeof e)return n.startsWith(e,c)?e:function(e,t,a){var r=e;if(-1===(e=d(e)?decodeURIComponent(e):e).indexOf("imagesvc.meredithcorp.io")&&-1!==e.indexOf("http")){var o=n.includes(e,".gif")?"/gif":"/image",s={url:e};("number"==typeof t||parseInt(t,10))&&t&&(s.w=t),("number"==typeof a||parseInt(a,10))&&a&&(s.h=a),(s.w||s.h)&&(s.q=85),r="".concat(c).concat(o,"?").concat(i.stringify(s))}return r}(e,t,a);"object"===r(e)&&(e.image?s=o(e,e.crop):n.get(e,"original.src")&&(s=n.get(e,"original.src"))),s=d(s)?decodeURIComponent(s):s;var l=e;if(!n.includes(s,"imagesvc.meredithcorp.io")){var u=h(e,a),g=n.includes(s,".gif")?"/gif":"/image";u.url=s;var p="".concat(c).concat(g,"?").concat(i.stringify(u));if("boolean"==typeof t&&t)return p;l='src="'.concat(p,'" width="').concat(u.w,'" height="').concat(u.h,'"')}return l},e.exports.imageServiceUrlParams=h},797:function(e,t,a){var r=a(2);e.exports=function(e,t){if(e&&t.crops&&r.get(t,"crops.".concat(e,".special_crop"))){var a=r.get(t,"crops.".concat(e)),n=a.special_crop;if(a.override_image)return r.get(a,"override_image.udf.original.src");if(n)return"rect=".concat(n.ulx,",").concat(n.uly,",").concat(n.brx,",").concat(n.bry)}return""}}}]);
//# sourceMappingURL=50-50.js.map